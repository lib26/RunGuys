<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>RunGuys</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery.js" type="text/javascript"></script>
    <script src="js/modernizr.js" type="text/javascript"></script>
    <style>
      body {
        margin: 0px;
      }
      #loading{
        height: 150vw;
      }
    </style>
        <script>
            function startMusic(){
              const audioContainer = document.querySelector('#bgm');
              audioContainer.loop = true;
              audioContainer.play()
            }
            // function winMusic(){
            //   const audioContainer = document.querySelector('#winBgm');
            //   audioContainer.loop = true;
            //   audioContainer.play()
            // }
          $(document).ready(function() {
            if(!Modernizr.meter){
              alert('Sorry your brower does not support HTML5 progress bar');
            } else {
              var progressbar = $('#progressbar'),
                max = progressbar.attr('max'),
                time = (1000/max)*2,	
                value = progressbar.val();

                var loading = function() {
                    value += 0.25;
                    addValue = progressbar.val(value.toFixed());
                    
                    $('.progress-value').html(value.toFixed(0) + '%');
                    if (value >= max) {
                        clearInterval(animate);
                        document.getElementById("loading").style.display ="none";    
                        document.getElementById("youWIN").style.display = "none";
                        document.getElementById("timerBox").style.display = "none";
                        startMusic();
                    }
                };
                var animate = setInterval(function() {
                    loading();
                }, time);
            };
          });
          // window.onbeforeunload = function(){$('#loading').show();}
        </script>
  </head>
  <body>
      <div class = "box">
        <div id = "loading" class="demo-wrapper html5-progress-bar">
          <img id = "titleImg" src = "models/images/Title_2.png"/>
          <!-- <br><hr id ="titleHr"><br> -->
          <div class="progress-bar-wrapper">
            <progress id="progressbar" value="0" max="100"></progress>
          </div>
          <br><text id ="progress-value-loading">Loading </text><span class="progress-value" id="progress-value-id">0%</span>
          <br>
          <!-- <h3>Computer Graphics TermProject</h3><br>
          201835429 김윤호<br>
          201835506 임동혁<br>
          201835509 임인범<br>
          201835531 조연겸<br> -->
        </div>
        <div id = "youWIN" class = 'line'>
          <p id = "youWinText" class = 'pop-outin'>You Finished The Race!</p>
        </div>
        <div id='timerBox' class="timerBox">
          <div id="time" class="time">00:00:00</div>
        </div>
        <audio id = "bgm">
          <source id = "bgmSource" src = "models/music/1 - Everybody Falls (Fall Guys Theme).mp3"/>
        </audio>
        <!-- <audio id = "winBgm">
          <source id = 'winBgmSource' src = "models/music/6 - Didn't Fall! (You Win).mp3"/>
        </audio> -->
        <script src = "index.js">
        </script>
      </div>
  </body>
</html>